{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 350,
      "y": 30,
      "width": 700,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 36,
      "fontFamily": 1,
      "text": "Tool Call Verification with HasMatchingSpan",
      "textAlign": "center",
      "verticalAlign": "top"
    },
    {
      "id": "subtitle",
      "type": "text",
      "x": 300,
      "y": 90,
      "width": 800,
      "height": 25,
      "angle": 0,
      "strokeColor": "#424242",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 16,
      "fontFamily": 1,
      "text": "Verify agent behavior by inspecting OpenTelemetry spans - no LLM needed",
      "textAlign": "center",
      "verticalAlign": "top"
    },
    {
      "id": "tree-label",
      "type": "text",
      "x": 100,
      "y": 150,
      "width": 400,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 20,
      "fontFamily": 1,
      "text": "üìä OpenTelemetry Span Tree",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "root-span-bg",
      "type": "rectangle",
      "x": 150,
      "y": 200,
      "width": 300,
      "height": 80,
      "angle": 0,
      "strokeColor": "#00838F",
      "backgroundColor": "#B2EBF2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "root-span-text",
      "type": "text",
      "x": 160,
      "y": 215,
      "width": 280,
      "height": 50,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 14,
      "fontFamily": 1,
      "text": "üéØ Agent Run Span\nRoot of execution trace",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "tree-line-1",
      "type": "line",
      "x": 300,
      "y": 280,
      "width": 0,
      "height": 40,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "tree-line-2a",
      "type": "line",
      "x": 150,
      "y": 320,
      "width": 150,
      "height": 0,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [150, 0]]
    },
    {
      "id": "tree-line-2b",
      "type": "line",
      "x": 300,
      "y": 320,
      "width": 150,
      "height": 0,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [150, 0]]
    },
    {
      "id": "tree-line-3a",
      "type": "line",
      "x": 150,
      "y": 320,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]]
    },
    {
      "id": "tree-line-3b",
      "type": "line",
      "x": 300,
      "y": 320,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]]
    },
    {
      "id": "tree-line-3c",
      "type": "line",
      "x": 450,
      "y": 320,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]]
    },
    {
      "id": "chat1-span-bg",
      "type": "rectangle",
      "x": 50,
      "y": 350,
      "width": 200,
      "height": 60,
      "angle": 0,
      "strokeColor": "#00838F",
      "backgroundColor": "#E0F7FA",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "id": "chat1-span-text",
      "type": "text",
      "x": 60,
      "y": 365,
      "width": 180,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 12,
      "fontFamily": 1,
      "text": "üí¨ Chat Span\n(LLM request)",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "tools-span-bg",
      "type": "rectangle",
      "x": 200,
      "y": 350,
      "width": 200,
      "height": 60,
      "angle": 0,
      "strokeColor": "#00838F",
      "backgroundColor": "#E0F7FA",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "id": "tools-span-text",
      "type": "text",
      "x": 210,
      "y": 365,
      "width": 180,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 12,
      "fontFamily": 1,
      "text": "üîß Running Tools\n(tool execution)",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "chat2-span-bg",
      "type": "rectangle",
      "x": 350,
      "y": 350,
      "width": 200,
      "height": 60,
      "angle": 0,
      "strokeColor": "#00838F",
      "backgroundColor": "#E0F7FA",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "id": "chat2-span-text",
      "type": "text",
      "x": 360,
      "y": 365,
      "width": 180,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 12,
      "fontFamily": 1,
      "text": "üí¨ Chat Span\n(final response)",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "tree-line-4",
      "type": "line",
      "x": 300,
      "y": 410,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#616161",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]]
    },
    {
      "id": "tool-span-bg",
      "type": "rectangle",
      "x": 150,
      "y": 440,
      "width": 300,
      "height": 100,
      "angle": 0,
      "strokeColor": "#E65100",
      "backgroundColor": "#FFE0B2",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "tool-span-text",
      "type": "text",
      "x": 160,
      "y": 455,
      "width": 280,
      "height": 70,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "üéØ Tool Execution Span\n\nAttributes:\n  gen_ai.tool.name:\n    \"retrieve_relevant_documents\"",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "attribute-badge",
      "type": "diamond",
      "x": 175,
      "y": 560,
      "width": 250,
      "height": 50,
      "angle": 0,
      "strokeColor": "#E65100",
      "backgroundColor": "#FFF3E0",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": []
    },
    {
      "id": "attribute-badge-text",
      "type": "text",
      "x": 185,
      "y": 573,
      "width": 230,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 11,
      "fontFamily": 1,
      "text": "üëÜ Tool name stored here!\nUse has_attributes to check",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "positive-card-bg",
      "type": "rectangle",
      "x": 650,
      "y": 150,
      "width": 550,
      "height": 300,
      "angle": 0,
      "strokeColor": "#2E7D32",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["positive-card"],
      "roundness": { "type": 3, "value": 16 }
    },
    {
      "id": "positive-header-bg",
      "type": "rectangle",
      "x": 650,
      "y": 150,
      "width": 550,
      "height": 60,
      "angle": 0,
      "strokeColor": "#2E7D32",
      "backgroundColor": "#4CAF50",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["positive-card"],
      "roundness": { "type": 3, "value": 16 }
    },
    {
      "id": "positive-header-text",
      "type": "text",
      "x": 660,
      "y": 165,
      "width": 530,
      "height": 30,
      "angle": 0,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["positive-card"],
      "fontSize": 20,
      "fontFamily": 1,
      "text": "‚úÖ Positive Check: Tool MUST Be Called",
      "textAlign": "left",
      "verticalAlign": "middle"
    },
    {
      "id": "positive-content",
      "type": "text",
      "x": 670,
      "y": 225,
      "width": 510,
      "height": 210,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["positive-card"],
      "fontSize": 14,
      "fontFamily": 1,
      "text": "YAML Syntax:\n  HasMatchingSpan:\n    query:\n      has_attributes:\n        gen_ai.tool.name: \"retrieve_relevant_documents\"\n\n‚Ä¢ Verifies agent called expected tool\n‚Ä¢ Catches hallucination (answer without RAG lookup)\n‚Ä¢ Use for: RAG queries, calculations, web search\n‚Ä¢ Fast, free, deterministic check",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "negative-card-bg",
      "type": "rectangle",
      "x": 650,
      "y": 480,
      "width": 550,
      "height": 300,
      "angle": 0,
      "strokeColor": "#C62828",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["negative-card"],
      "roundness": { "type": 3, "value": 16 }
    },
    {
      "id": "negative-header-bg",
      "type": "rectangle",
      "x": 650,
      "y": 480,
      "width": 550,
      "height": 60,
      "angle": 0,
      "strokeColor": "#C62828",
      "backgroundColor": "#F44336",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["negative-card"],
      "roundness": { "type": 3, "value": 16 }
    },
    {
      "id": "negative-header-text",
      "type": "text",
      "x": 660,
      "y": 495,
      "width": 530,
      "height": 30,
      "angle": 0,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["negative-card"],
      "fontSize": 20,
      "fontFamily": 1,
      "text": "‚ùå Negative Check: Tool Must NOT Be Called",
      "textAlign": "left",
      "verticalAlign": "middle"
    },
    {
      "id": "negative-content",
      "type": "text",
      "x": 670,
      "y": 555,
      "width": 510,
      "height": 210,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": ["negative-card"],
      "fontSize": 14,
      "fontFamily": 1,
      "text": "YAML Syntax:\n  HasMatchingSpan:\n    query:\n      not_:\n        has_attributes:\n          gen_ai.tool.name: \"execute_code\"\n\n‚Ä¢ Ensures dangerous tools NOT called\n‚Ä¢ Critical for safety on harmful requests\n‚Ä¢ Use for: Preventing code execution, SQL injection\n‚Ä¢ Security-focused verification",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "benefits-bg",
      "type": "rectangle",
      "x": 200,
      "y": 820,
      "width": 1000,
      "height": 60,
      "angle": 0,
      "strokeColor": "#1565C0",
      "backgroundColor": "#E3F2FD",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "benefits-text",
      "type": "text",
      "x": 220,
      "y": 835,
      "width": 960,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 14,
      "fontFamily": 1,
      "text": "‚ö° Fast (no LLM calls)  ‚Ä¢  üÜì Free (deterministic logic)  ‚Ä¢  üéØ Precise (yes/no answers)\nüîç Verify Behavior (not just output)  ‚Ä¢  üõ°Ô∏è Safety Critical (prevent dangerous actions)",
      "textAlign": "center",
      "verticalAlign": "middle"
    },
    {
      "id": "otel-badge",
      "type": "rectangle",
      "x": 50,
      "y": 640,
      "width": 500,
      "height": 50,
      "angle": 0,
      "strokeColor": "#00838F",
      "backgroundColor": "#B2EBF2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "id": "otel-badge-text",
      "type": "text",
      "x": 60,
      "y": 653,
      "width": 480,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 12,
      "fontFamily": 1,
      "text": "üì° OpenTelemetry Automatic Tracing\nNo instrumentation needed - pydantic-ai creates spans automatically",
      "textAlign": "center",
      "verticalAlign": "middle"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
