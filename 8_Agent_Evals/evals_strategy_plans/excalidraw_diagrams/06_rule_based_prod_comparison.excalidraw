{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 400,
      "y": 30,
      "width": 800,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 36,
      "fontFamily": 1,
      "text": "Rule-Based Evals in Production",
      "textAlign": "center",
      "verticalAlign": "top"
    },
    {
      "id": "subtitle",
      "type": "text",
      "x": 200,
      "y": 90,
      "width": 1200,
      "height": 25,
      "angle": 0,
      "strokeColor": "#424242",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 16,
      "fontFamily": 1,
      "text": "Async evaluation + Langfuse score sync = real-time production monitoring with zero user latency",
      "textAlign": "center",
      "verticalAlign": "top"
    },
    {
      "id": "comparison-box",
      "type": "rectangle",
      "x": 50,
      "y": 140,
      "width": 400,
      "height": 180,
      "angle": 0,
      "strokeColor": "#1565C0",
      "backgroundColor": "#E3F2FD",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "comparison-title",
      "type": "text",
      "x": 70,
      "y": 155,
      "width": 360,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1565C0",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 16,
      "fontFamily": 1,
      "text": "üìä Local vs Production (Quick Ref)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "comparison-content",
      "type": "text",
      "x": 70,
      "y": 190,
      "width": 360,
      "height": 115,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Local (Video 3):\n‚Ä¢ Golden dataset (10 cases)\n‚Ä¢ Sync execution, terminal output\n\nProduction (This Video):\n‚Ä¢ Real traces, after each request\n‚Ä¢ Async execution, Langfuse scores\n‚Ä¢ Same evaluators, just add sync!",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "workflow-box",
      "type": "rectangle",
      "x": 480,
      "y": 140,
      "width": 1070,
      "height": 700,
      "angle": 0,
      "strokeColor": "#6A1B9A",
      "backgroundColor": "#F3E5F5",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 16 }
    },
    {
      "id": "workflow-title",
      "type": "text",
      "x": 500,
      "y": 155,
      "width": 1030,
      "height": 30,
      "angle": 0,
      "strokeColor": "#6A1B9A",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 24,
      "fontFamily": 1,
      "text": "üöÄ Production Workflow: Async Evaluation + Langfuse Sync",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "step1-bg",
      "type": "rectangle",
      "x": 500,
      "y": 210,
      "width": 1030,
      "height": 100,
      "angle": 0,
      "strokeColor": "#2E7D32",
      "backgroundColor": "#E8F5E9",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "step1-title",
      "type": "text",
      "x": 520,
      "y": 225,
      "width": 990,
      "height": 25,
      "angle": 0,
      "strokeColor": "#2E7D32",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 18,
      "fontFamily": 1,
      "text": "1Ô∏è‚É£ User Request ‚Üí Agent Response (INSTANT - User Gets Response)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "step1-content",
      "type": "text",
      "x": 520,
      "y": 260,
      "width": 990,
      "height": 35,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "‚Ä¢ User asks question ‚Üí Agent generates response ‚Üí Response sent immediately ‚ö°\n‚Ä¢ trace_id captured from Langfuse context (already set up in Module 6)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "arrow-down-1",
      "type": "arrow",
      "x": 1015,
      "y": 320,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#424242",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step2-bg",
      "type": "rectangle",
      "x": 500,
      "y": 360,
      "width": 1030,
      "height": 120,
      "angle": 0,
      "strokeColor": "#E65100",
      "backgroundColor": "#FFF3E0",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "step2-title",
      "type": "text",
      "x": 520,
      "y": 375,
      "width": 990,
      "height": 25,
      "angle": 0,
      "strokeColor": "#E65100",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 18,
      "fontFamily": 1,
      "text": "2Ô∏è‚É£ Fire Async Evaluation Task (NON-BLOCKING)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "step2-content",
      "type": "text",
      "x": 520,
      "y": 410,
      "width": 990,
      "height": 55,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "asyncio.create_task(prod_evaluator.evaluate_and_sync(trace_id, output, inputs))\n\n‚Ä¢ Task runs in background - doesn't block user response\n‚Ä¢ User already has their answer, now we evaluate quality in background",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "arrow-down-2",
      "type": "arrow",
      "x": 1015,
      "y": 490,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#424242",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step3-bg",
      "type": "rectangle",
      "x": 500,
      "y": 530,
      "width": 1030,
      "height": 150,
      "angle": 0,
      "strokeColor": "#1565C0",
      "backgroundColor": "#E3F2FD",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "step3-title",
      "type": "text",
      "x": 520,
      "y": 545,
      "width": 990,
      "height": 25,
      "angle": 0,
      "strokeColor": "#1565C0",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 18,
      "fontFamily": 1,
      "text": "3Ô∏è‚É£ Run Evaluators (Reused from Video 3)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "step3-content",
      "type": "text",
      "x": 520,
      "y": 580,
      "width": 990,
      "height": 85,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "for eval_name, evaluator in self.evaluators:\n    result = evaluator.evaluate(ctx)  # Same evaluate() method as local!\n\nEvaluators:\n‚Ä¢ NoPII() - Check for phone, SSN, email patterns\n‚Ä¢ NoForbiddenWords(forbidden=[\"password\", \"secret\"]) - Blocklist check\n‚Ä¢ Custom evaluators you built in Video 3 - exact same code!",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "arrow-down-3",
      "type": "arrow",
      "x": 1015,
      "y": 690,
      "width": 0,
      "height": 30,
      "angle": 0,
      "strokeColor": "#424242",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "points": [[0, 0], [0, 30]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step4-bg",
      "type": "rectangle",
      "x": 500,
      "y": 730,
      "width": 1030,
      "height": 100,
      "angle": 0,
      "strokeColor": "#6A1B9A",
      "backgroundColor": "#E1BEE7",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "step4-title",
      "type": "text",
      "x": 520,
      "y": 745,
      "width": 990,
      "height": 25,
      "angle": 0,
      "strokeColor": "#6A1B9A",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 18,
      "fontFamily": 1,
      "text": "4Ô∏è‚É£ Sync Scores to Langfuse (Production Monitoring)",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "step4-content",
      "type": "text",
      "x": 520,
      "y": 780,
      "width": 990,
      "height": 35,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "langfuse.score(trace_id=trace_id, name=\"rule_no_pii\", value=1.0 or 0.0, comment=reason)\n‚Ä¢ Scores appear on trace in Langfuse dashboard ‚Üí filter, search, monitor violations!",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "monitoring-box",
      "type": "rectangle",
      "x": 50,
      "y": 350,
      "width": 400,
      "height": 490,
      "angle": 0,
      "strokeColor": "#7B1FA2",
      "backgroundColor": "#F3E5F5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "monitoring-title",
      "type": "text",
      "x": 70,
      "y": 365,
      "width": 360,
      "height": 30,
      "angle": 0,
      "strokeColor": "#7B1FA2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 18,
      "fontFamily": 1,
      "text": "üìà Langfuse Dashboard",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "monitoring-content",
      "type": "text",
      "x": 70,
      "y": 410,
      "width": 360,
      "height": 410,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "Scores Attached:\n‚Ä¢ rule_no_pii: 0 or 1\n‚Ä¢ rule_no_forbidden: 0 or 1\n‚Ä¢ rule_check_passed: 0 or 1\n  (overall pass/fail)\n\nFilter & Monitor:\n‚Ä¢ Filter by score = 0 to find\n  violations\n‚Ä¢ Track violation rate over time\n‚Ä¢ Correlate with user feedback\n‚Ä¢ Export for analysis\n\nAlerts (Optional):\n‚Ä¢ Set up alerts for violations\n‚Ä¢ Slack/email notifications\n‚Ä¢ Trigger on critical rules\n\nUse Cases:\n‚Ä¢ Find PII leaks in production\n‚Ä¢ Monitor forbidden word usage\n‚Ä¢ Catch safety violations\n‚Ä¢ Quality trends over time\n‚Ä¢ A/B test rule effectiveness",
      "textAlign": "left",
      "verticalAlign": "top"
    },
    {
      "id": "bottom-callout-bg",
      "type": "rectangle",
      "x": 50,
      "y": 870,
      "width": 1500,
      "height": 60,
      "angle": 0,
      "strokeColor": "#2E7D32",
      "backgroundColor": "#E8F5E9",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": { "type": 3, "value": 12 }
    },
    {
      "id": "bottom-callout-text",
      "type": "text",
      "x": 70,
      "y": 885,
      "width": 1460,
      "height": 30,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "fontSize": 13,
      "fontFamily": 1,
      "text": "üí° Key Benefits: Zero user latency (async), same evaluators as local (no rebuild), real-time monitoring (Langfuse), <10ms per evaluator (fast)\nüéØ Production Pattern: asyncio.create_task() = fire and forget ‚Üí user gets instant response, evaluation happens in background",
      "textAlign": "center",
      "verticalAlign": "middle"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
